import{d as b,q as F,e as p,k as g,g as l,u as i,A as D,B as I,_ as y,j as N,v as u,l as t,m as s,z as k,t as v,w as L,a as z,o as x,r as $,F as E,f as B,C}from"./index-0177ebce.js";import{i as S}from"./index-2293ce1f.js";import{f as T}from"./info-280f73fe.js";const V="/medical-material-management/goods-manage-vue3/assets/1-d0132ac7.svg",W="/medical-material-management/goods-manage-vue3/assets/2-efd442f1.svg",A="/medical-material-management/goods-manage-vue3/assets/3-8dd88cbb.svg",m=n=>(D("data-v-3a9ad64a"),n=n(),I(),n),O={class:"navBlock"},U=m(()=>l("img",{src:V,alt:""},null,-1)),q=m(()=>l("span",null,"物资资料",-1)),j=[U,q],G=m(()=>l("img",{src:W,alt:""},null,-1)),M=m(()=>l("span",null,"物资来源",-1)),P=[G,M],R=m(()=>l("img",{src:A,alt:""},null,-1)),X=m(()=>l("span",null,"物资入库",-1)),Z=[R,X],H=m(()=>l("img",{src:A,alt:""},null,-1)),J=m(()=>l("span",null,"物资发放",-1)),K=[H,J],Q=b({__name:"navBlock",setup(n){let o=F();return(r,e)=>(p(),g("div",O,[l("a",{onClick:e[0]||(e[0]=c=>i(o).push("/goods/info"))},j),l("a",{onClick:e[1]||(e[1]=c=>i(o).push("/goods/source"))},P),l("a",{onClick:e[2]||(e[2]=c=>i(o).push("/inventory/storage"))},Z),l("a",{onClick:e[3]||(e[3]=c=>i(o).push("/inventory/provide"))},K)]))}});const Y=y(Q,[["__scopeId","data-v-3a9ad64a"]]),ee={class:"userBlock"},te=b({__name:"userBlock",setup(n){let o=N();return(r,e)=>{var d;const c=u("el-avatar"),a=u("el-table-column"),_=u("el-table");return p(),g("div",ee,[t(c,{shape:"square",size:85,src:i(o).userInfo.avatar},null,8,["src"]),t(_,{data:[(d=i(o))==null?void 0:d.userInfo],"cell-style":{height:"55px"}},{default:s(()=>[t(a,{prop:"username",label:"账号",width:"110"}),t(a,{prop:"nickname",label:"昵称",width:"110"}),t(a,{prop:"department",label:"所属部门",width:"110"}),t(a,{label:"角色",width:"110"},{default:s(f=>{var h;return[k(v(f.row.isAdmin?"超级管理员":(h=f.row.roles)==null?void 0:h.join("、")),1)]}),_:1})]),_:1},8,["data"])])}}});const ae=y(te,[["__scopeId","data-v-d667b62e"]]),oe={class:"tableBlock"},le=b({__name:"tableBlock",props:{tableData:{}},setup(n){let o=n;var r;return L(()=>o.tableData,e=>{var c;if(e){let a=(c=o.tableData)==null?void 0:c.length,_=document.querySelector(".tableBlock .el-scrollbar"),d=55;r=setInterval(()=>{d/55-1==a?(d=55,_.style.bottom="0px"):(_.style.bottom=d+"px",d+=55)},2e3)}},{immediate:!0}),z(()=>{r=void 0,clearInterval(r)}),(e,c)=>{const a=u("el-table-column"),_=u("el-text"),d=u("el-tag"),f=u("el-table");return p(),g("div",oe,[t(f,{border:"",data:e.tableData,stripe:"","cell-style":{height:"55px"},"header-cell-style":{height:"60px",background:"rgb(249, 250, 254) !important"}},{default:s(()=>[t(a,{prop:"id",label:"物资ID",width:"100"}),t(a,{prop:"name",label:"物资名称"},{default:s(h=>[t(_,{type:"warning"},{default:s(()=>[k(v(h.row.name),1)]),_:2},1024)]),_:1}),t(a,{prop:"model",label:"物资规格"}),t(a,{prop:"unit",label:"单位",width:"100"}),t(a,{prop:"stock",label:"库存"},{default:s(h=>[t(d,{size:"large"},{default:s(()=>[k(v(h.row.stock)+v(h.row.unit),1)]),_:2},1024)]),_:1})]),_:1},8,["data","header-cell-style"])])}}});const se=y(le,[["__scopeId","data-v-33886159"]]),ne={id:"chartCakeshaped",style:{height:"250px"}},re=b({__name:"chartCakeshaped",props:{tableData:{}},setup(n){let o=n;var r;return x(()=>{r=S(document.getElementById("chartCakeshaped")),r.setOption({tooltip:{trigger:"item",borderWidth:"0",backgroundColor:"rgba(0,0,0,.5)",textStyle:{color:"#fff"},formatter:function(e){return`库存占比:<br/> ${e.marker}${e.name}: ${e.percent}%`}},legend:{orient:"vertical",right:"4%",bottom:"7%",type:"scroll"},grid:{},series:[{name:"库存占比",type:"pie",radius:"65%",data:o.tableData.map(e=>({value:e.stock,name:e.name})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{color:"inherit"}}]})}),(e,c)=>(p(),g("div",ne))}}),ce={id:"chartColumnar",style:{height:"320px"}},_e=b({__name:"chartColumnar",props:{tableData:{}},setup(n){let o=n;var r;return x(()=>{var e,c;r=S(document.getElementById("chartColumnar")),r.setOption({color:["#0780cf ","#fa6d1d ","#ac2026 ","#701866 ","#d22e8d ","#FE8463","#a195c5 ","#FAD860","#F3A43B","#60C0DD","#D7504B","#a195c5  ","#F4E001","#F0805A","#63b2ee"],xAxis:{type:"category",data:(e=o.tableData)==null?void 0:e.map(a=>a.name),axisLabel:{fontWeight:"bold",color:"#878787",margin:20,fontSize:11},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",splitNumber:6,axisLabel:{fontWeight:"bold",color:"#878787"},axisLine:{show:!0},axisTick:{show:!0},splitLine:{show:!0,lineStyle:{color:["#CACACA"]}}},grid:{bottom:37,left:40,right:10},tooltip:{show:!0,formatter:function(a){return`剩余库存量 <br/> ${a.marker} ${a.name}：${a.value} ${o.tableData[a.dataIndex].unit}`},borderWidth:"0",backgroundColor:"rgba(0,0,0,.5)",textStyle:{color:"#fff"}},toolbox:{show:!0,itemGap:12,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]}}},series:[{name:"series1",data:(c=o.tableData)==null?void 0:c.map(a=>a.stock),type:"bar",colorBy:"data",realtimeSort:!0,showBackground:!0,label:{show:!0,position:"top",formatter:`{b}
 {c}`,color:"inherit"}}]})}),(e,c)=>(p(),g("div",ce))}}),w=n=>(D("data-v-dc171baf"),n=n(),I(),n),de={class:"chart-card"},ie={class:"chart-Cakeshaped"},ue=w(()=>l("div",{class:"card-title"},"· 库存条形图",-1)),pe={class:"chart-Columnar"},me=w(()=>l("div",{class:"card-title"},"· 库存占比",-1)),he=w(()=>l("div",{class:"card-title"},"· 库存表格",-1)),be=b({__name:"index",setup(n){let o=$(),r=$(!1);return x(async()=>{let{data:e}=await T({pageNum:1,pageSize:100});r.value=!0,console.log("报表",e),o.value=e.rows}),(e,c)=>{const a=u("el-card"),_=u("el-col"),d=u("el-row");return p(),g(E,null,[t(d,{gutter:25,class:"one-row"},{default:s(()=>[t(_,{lg:12,span:12},{default:s(()=>[t(a,{style:{height:"100%"}},{default:s(()=>[t(ae)]),_:1})]),_:1}),t(_,{lg:12,span:12},{default:s(()=>[t(a,{style:{height:"100%"}},{default:s(()=>[t(Y)]),_:1})]),_:1})]),_:1}),t(d,{gutter:25,class:"two-row"},{default:s(()=>[t(_,{lg:12,span:12},{default:s(()=>[t(a,{style:{height:"100%"}},{default:s(()=>[l("div",de,[l("div",ie,[ue,i(r)?(p(),B(_e,{key:0,tableData:i(o)},null,8,["tableData"])):C("",!0)]),l("div",pe,[me,i(r)?(p(),B(re,{key:0,tableData:i(o)},null,8,["tableData"])):C("",!0)])])]),_:1})]),_:1}),t(_,{lg:12,span:12},{default:s(()=>[t(a,{style:{height:"100%"}},{default:s(()=>[he,t(se,{tableData:i(o)},null,8,["tableData"])]),_:1})]),_:1})]),_:1})],64)}}});const ye=y(be,[["__scopeId","data-v-dc171baf"]]);export{ye as default};
