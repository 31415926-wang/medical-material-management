import{d as b,q as F,e as u,k as f,g as l,u as d,A as D,B as I,_ as y,j as N,v as p,l as t,m as s,z as k,t as v,w as L,a as z,o as x,r as $,F as E,f as B,D as C}from"./index-6210074e.js";import{i as S}from"./index-ff8ee811.js";import{f as T}from"./info-18a9df74.js";const V="/assets/1-d0132ac7.svg",W="/assets/2-efd442f1.svg",A="/assets/3-8dd88cbb.svg",h=n=>(D("data-v-842f2b9d"),n=n(),I(),n),O={class:"navBlock"},U=h(()=>l("img",{src:V,alt:""},null,-1)),q=h(()=>l("span",null,"物资资料",-1)),j=[U,q],G=h(()=>l("img",{src:W,alt:""},null,-1)),M=h(()=>l("span",null,"物资来源",-1)),P=[G,M],R=h(()=>l("img",{src:A,alt:""},null,-1)),X=h(()=>l("span",null,"物资入库",-1)),Z=[R,X],H=h(()=>l("img",{src:A,alt:""},null,-1)),J=h(()=>l("span",null,"物资发放",-1)),K=[H,J],Q=b({__name:"navBlock",setup(n){let o=F();return(r,e)=>(u(),f("div",O,[l("a",{onClick:e[0]||(e[0]=c=>d(o).push("/goods/info"))},j),l("a",{onClick:e[1]||(e[1]=c=>d(o).push("/goods/source"))},P),l("a",{onClick:e[2]||(e[2]=c=>d(o).push("/inventory/storage"))},Z),l("a",{onClick:e[3]||(e[3]=c=>d(o).push("/inventory/provide"))},K)]))}});const Y=y(Q,[["__scopeId","data-v-842f2b9d"]]),ee={class:"userBlock"},te=b({__name:"userBlock",setup(n){let o=N();return(r,e)=>{var i;const c=p("el-avatar"),a=p("el-table-column"),_=p("el-table");return u(),f("div",ee,[t(c,{shape:"square",size:85,src:d(o).userInfo.avatar},null,8,["src"]),t(_,{data:[(i=d(o))==null?void 0:i.userInfo],"cell-style":{height:"55px"}},{default:s(()=>[t(a,{prop:"username",label:"账号",width:"110"}),t(a,{prop:"nickname",label:"昵称",width:"110"}),t(a,{prop:"department",label:"所属部门",width:"110"}),t(a,{label:"角色",width:"110"},{default:s(g=>{var m;return[k(v(g.row.isAdmin?"超级管理员":(m=g.row.roles)==null?void 0:m.join("、")),1)]}),_:1})]),_:1},8,["data"])])}}});const ae=y(te,[["__scopeId","data-v-75f16755"]]),oe={class:"tableBlock"},le=b({__name:"tableBlock",props:{tableData:{}},setup(n){let o=n;var r;return L(()=>o.tableData,e=>{var c;if(e){let a=(c=o.tableData)==null?void 0:c.length,_=document.querySelector(".tableBlock .el-scrollbar"),i=55;r=setInterval(()=>{i/55-1==a?(i=55,_.style.bottom="0px"):(_.style.bottom=i+"px",i+=55)},2e3)}},{immediate:!0}),z(()=>{r=void 0,clearInterval(r)}),(e,c)=>{const a=p("el-table-column"),_=p("el-text"),i=p("el-tag"),g=p("el-table");return u(),f("div",oe,[t(g,{border:"",data:e.tableData,stripe:"","cell-style":{height:"55px"},"header-cell-style":{height:"60px",background:"rgb(249, 250, 254) !important"}},{default:s(()=>[t(a,{prop:"id",label:"物资ID",width:"100"}),t(a,{prop:"name",label:"物资名称"},{default:s(m=>[t(_,{type:"warning"},{default:s(()=>[k(v(m.row.name),1)]),_:2},1024)]),_:1}),t(a,{prop:"model",label:"物资规格"}),t(a,{prop:"unit",label:"单位",width:"100"}),t(a,{prop:"stock",label:"库存"},{default:s(m=>[t(i,{size:"large"},{default:s(()=>[k(v(m.row.stock)+v(m.row.unit),1)]),_:2},1024)]),_:1})]),_:1},8,["data","header-cell-style"])])}}});const se=y(le,[["__scopeId","data-v-4f04a965"]]),ne={id:"chartCakeshaped",style:{height:"250px"}},re=b({__name:"chartCakeshaped",props:{tableData:{}},setup(n){let o=n;var r;return x(()=>{r=S(document.getElementById("chartCakeshaped")),r.setOption({tooltip:{trigger:"item",borderWidth:"0",backgroundColor:"rgba(0,0,0,.5)",textStyle:{color:"#fff"},formatter:function(e){return`库存占比:<br/> ${e.marker}${e.name}: ${e.percent}%`}},legend:{orient:"vertical",right:"4%",bottom:"7%",type:"scroll"},grid:{},series:[{name:"库存占比",type:"pie",radius:"65%",data:o.tableData.map(e=>({value:e.stock,name:e.name})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{color:"inherit"}}]})}),(e,c)=>(u(),f("div",ne))}}),ce={id:"chartColumnar",style:{height:"320px"}},_e=b({__name:"chartColumnar",props:{tableData:{}},setup(n){let o=n;var r;return x(()=>{var e,c;r=S(document.getElementById("chartColumnar")),r.setOption({color:["#0780cf ","#fa6d1d ","#ac2026 ","#701866 ","#d22e8d ","#FE8463","#a195c5 ","#FAD860","#F3A43B","#60C0DD","#D7504B","#a195c5  ","#F4E001","#F0805A","#63b2ee"],xAxis:{type:"category",data:(e=o.tableData)==null?void 0:e.map(a=>a.name),axisLabel:{fontWeight:"bold",color:"#878787",margin:20,fontSize:11},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",splitNumber:6,axisLabel:{fontWeight:"bold",color:"#878787"},axisLine:{show:!0},axisTick:{show:!0},splitLine:{show:!0,lineStyle:{color:["#CACACA"]}}},grid:{bottom:37,left:40,right:10},tooltip:{show:!0,formatter:function(a){return`剩余库存量 <br/> ${a.marker} ${a.name}：${a.value} ${o.tableData[a.dataIndex].unit}`},borderWidth:"0",backgroundColor:"rgba(0,0,0,.5)",textStyle:{color:"#fff"}},toolbox:{show:!0,itemGap:12,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]}}},series:[{name:"series1",data:(c=o.tableData)==null?void 0:c.map(a=>a.stock),type:"bar",colorBy:"data",realtimeSort:!0,showBackground:!0,label:{show:!0,position:"top",formatter:`{b}
 {c}`,color:"inherit"}}]})}),(e,c)=>(u(),f("div",ce))}}),w=n=>(D("data-v-02c787a1"),n=n(),I(),n),ie={class:"chart-card"},de={class:"chart-Cakeshaped"},pe=w(()=>l("div",{class:"card-title"},"· 库存条形图",-1)),ue={class:"chart-Columnar"},he=w(()=>l("div",{class:"card-title"},"· 库存占比",-1)),me=w(()=>l("div",{class:"card-title"},"· 库存表格",-1)),be=b({__name:"index",setup(n){let o=$(),r=$(!1);return x(async()=>{let{data:e}=await T({pageNum:1,pageSize:100});r.value=!0,console.log("报表",e),o.value=e.rows}),(e,c)=>{const a=p("el-card"),_=p("el-col"),i=p("el-row");return u(),f(E,null,[t(i,{gutter:25,class:"one-row"},{default:s(()=>[t(_,{lg:12,span:12},{default:s(()=>[t(a,{style:{height:"100%"}},{default:s(()=>[t(ae)]),_:1})]),_:1}),t(_,{lg:12,span:12},{default:s(()=>[t(a,{style:{height:"100%"}},{default:s(()=>[t(Y)]),_:1})]),_:1})]),_:1}),t(i,{gutter:25,class:"two-row"},{default:s(()=>[t(_,{lg:12,span:12},{default:s(()=>[t(a,{style:{height:"100%"}},{default:s(()=>[l("div",ie,[l("div",de,[pe,d(r)?(u(),B(_e,{key:0,tableData:d(o)},null,8,["tableData"])):C("",!0)]),l("div",ue,[he,d(r)?(u(),B(re,{key:0,tableData:d(o)},null,8,["tableData"])):C("",!0)])])]),_:1})]),_:1}),t(_,{lg:12,span:12},{default:s(()=>[t(a,{style:{height:"100%"}},{default:s(()=>[me,t(se,{tableData:d(o)},null,8,["tableData"])]),_:1})]),_:1})]),_:1})],64)}}});const ye=y(be,[["__scopeId","data-v-02c787a1"]]);export{ye as default};
